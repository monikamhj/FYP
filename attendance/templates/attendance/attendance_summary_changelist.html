{% extends "admin/change_list.html" %}
{% load i18n %}

{% block result_list %}
  <h2>{% trans "Daily attendance (1 row per student per day)" %}</h2>

  <table class="adminlist">
    <thead>
      <tr>
        <th>{% trans "Student" %}</th>
        <th>{% trans "Date" %}</th>
        <th>{% trans "First check-in" %}</th>
        <th>{% trans "Last check-out" %}</th>
        <th>{% trans "Sessions" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for row in daily_summary %}
        <tr>
          <td>{{ row.student__name }}</td>
          <td>{{ row.date }}</td>
          <td>{{ row.first_in }}</td>
          <td>{{ row.last_out }}</td>
          <td>
            {# link back to normal Attendance changelist filtered for this student+date #}
            <a href="{% url 'admin:attendance_attendance_changelist' %}?student__student_id__exact={{ row.student__student_id }}&date__exact={{ row.date }}">
                {% trans "Details" %}
            </a>
            
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5">{% trans "No attendance records." %}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
